#!/bin/bash

if [ -r /usr/local/etc/bash_completion.d/git-prompt.sh ]; then
    source /usr/local/etc/bash_completion.d/git-prompt.sh
elif [ -r /etc/bash_completion.d/git-prompt ]; then
    source /etc/bash_completion.d/git-prompt
else
    >&2 echo "could not find git-prompt"
    exit 1
fi

GIT_PS1_SHOWDIRTYSTATE=true
GIT_PS1_SHOWSTASHSTATE=true
GIT_PS1_SHOWUNTRACKEDFILES=true
GIT_PS1_SHOWUPSTREAM=auto

git_status="$(__git_ps1 "$1")"

if [ -n "$git_status" ]; then
    if [[ $git_status =~ [*]  ]]; then
        git_status="$(tput setaf 1)$git_status$(tput sgr0)"
    elif [[ $git_status =~ [%\<\>$+] ]]; then
        git_status="$(tput setaf 3)$git_status$(tput sgr0)"
    else
        git_status="$(tput setaf 2)$git_status$(tput sgr0)"
    fi
fi

echo "$git_status"
